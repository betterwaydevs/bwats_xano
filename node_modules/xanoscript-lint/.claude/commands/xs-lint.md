---
name: xs-lint
description: Validate XanoScript files and fix issues
allowed-tools: Run, Read, Bash (xs-lint), Edit, Write
---

Run XanoScript diagnostics using the LSP server and fix all issues found.

## Process

### Step 1: Run Diagnostics

Execute the xs-lint command to get diagnostics:

```bash
xs-lint --json $ARGUMENTS
```

Parse the JSON output to identify:

- Files with errors
- Error locations (line, column)
- Error messages
- Severity levels

### Step 2: Analyze Issues

For each file with errors:

1. Read the file to understand the context
2. Group errors by severity (errors first, then warnings)
3. Identify the type of issue (syntax error, semantic error, etc.)

### Step 3: Fix Issues

For each diagnostic:

- **Location**: Line {line}, Column {column}
- **Severity**: {severity}
- **Message**: {message}
- **Action**: Use the Edit tool to fix the issue at the specified location
- **Verification**: Ensure the fix maintains code functionality

Common XanoScript issues to look for:

- Missing or extra braces/brackets
- Incorrect function syntax
- Invalid field references
- Type mismatches
- Malformed clauses (stack, input, response, etc.)

### Step 4: Re-validate

After making fixes, run xs-lint again to verify:

```bash
xs-lint --json $ARGUMENTS
```

Confirm all errors are resolved.

### Step 5: Report Results

Provide a summary including:

- Total files checked
- Issues found (errors/warnings/info)
- Issues fixed
- Remaining warnings (if any couldn't be auto-fixed)
- Suggestions for manual review if needed

## Usage Examples

```bash
# Validate all .xs files in project
/xs-lint

# Validate specific files
/xs-lint src/api/users.xs

# Validate files matching pattern
/xs-lint "src/api/**/*.xs"
```

## Notes

- If no arguments are provided, all .xs files in the project will be checked
- The command uses the XanoScript LSP server from your VS Code extension
- Some complex semantic errors may require manual review
- Always test the fixed code to ensure functionality is preserved
- For automation (skills, CI), pipe newline-separated file paths into `xs-lint --json --stdin` so you only need to approve the command once.
