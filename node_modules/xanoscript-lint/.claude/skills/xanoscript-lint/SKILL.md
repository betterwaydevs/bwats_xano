---
name: XanoScript Validation
description: Validate XanoScript (.xs) files using LSP diagnostics. Use when creating/editing .xs files, after builds, or when the user mentions XanoScript errors. Always validate automatically after Write/Edit on .xs files.
allowed-tools: Run, Read, Bash (xs-lint), Bash (xs-hover), Bash (xs-complete), Glob, Edit, Write
---

# XanoScript Validation

Claude runs this Skill to keep every `.xs` file clean using the XanoScript Language Server.

## When to Activate

- After the assistant writes or edits any `.xs` file
- After build/deploy commands (`npm run build`, etc.)
- When the user reports validation or syntax issues
- Before handing off a feature or finishing a session

## Allowed Tools

- `Run`: execute `xs-lint`, `xs-hover`, and `xs-complete`
- `Read`: inspect `.xs` files and related references
- `Edit`/`Write`: apply fixes suggested by diagnostics

No other tools should be used while the Skill is active.

## Primary Command

```bash
printf "%s\n" path/to/file.xs ... | xs-lint --json --stdin
```

- Always pipe newline-separated paths into `xs-lint --json --stdin` so the command signature stays constant and only needs approval once.
- For all-files validation, emit every path you need to check via stdin.

## Workflow

1. **Validate** – run the primary command on the relevant files.
2. **Parse diagnostics** – read every entry in `results[].diagnostics[]` for line, column, severity, and message.
3. **Investigate** – use `Read` (and `xs-hover` when needed) to understand the failing code.
4. **Fix** – apply changes with `Edit`/`Write`, guided by `CLAUDE.md` and repo conventions.
5. **Re-validate** – rerun `xs-lint --json --stdin` on the touched files until clean.
6. **Report** – summarize files checked, issues found/fixed, and any remaining warnings.

## Supporting LSP Commands

```bash
# Documentation/type info at a specific location
xs-hover file.xs --line 12 --column 5 --json

# Completions at a specific location
xs-complete file.xs --line 15 --column 8 --json
```

Use hover for context when errors are unclear; invoke completions when adding new XanoScript constructs.

## Reference Material

- Syntax & semantics: `CLAUDE.md`
- Validation deep dive: [VALIDATION.md](VALIDATION.md)
- LSP usage guide: [LSP_FEATURES.md](LSP_FEATURES.md)

## Safety Notes

- If the LSP server fails to start, stop and ask the user for guidance.
- Do not modify non-`.xs` files unless diagnostics explicitly require cross-file fixes.
- Preserve original formatting; only change what is necessary to resolve diagnostics.
