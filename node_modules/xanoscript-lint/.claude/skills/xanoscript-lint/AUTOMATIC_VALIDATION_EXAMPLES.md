# Automatic Validation Examples

Real-world examples of how automatic XanoScript validation works in practice.

## Example 1: Creating a New API Endpoint

**User Request:**
> "Create a GET endpoint for fetching all active users"

**Claude's Response (with automatic validation):**

```
I'll create a new API endpoint for fetching active users.
```

*Creates the file users.xs*

```
Running automatic validation on users.xs...
âœ… Validation passed - No errors found!

Created users.xs with the following endpoint:
- GET /users - Fetches all active users with filtering
```

**Behind the scenes:**
1. Used Write tool to create users.xs
2. Automatically ran: `xs-lint users.xs --json`
3. Checked results
4. Reported success to user

## Example 2: Creating a File with an Error

**User Request:**
> "Create a POST endpoint for creating a new post"

**Claude's Response (with automatic error detection and fixing):**

```
I'll create a new API endpoint for creating posts.
```

*Creates the file posts.xs*

```
Running automatic validation on posts.xs...
âš ï¸ Found 1 error - fixing automatically...

Error detected:
- Line 8: Missing colon after 'title' in input block

Applying fix...
Re-validating...
âœ… Validation passed - Error fixed!

Created posts.xs with:
- POST /posts - Creates a new post with title and content
```

**Behind the scenes:**
1. Used Write tool to create posts.xs
2. Automatically ran: `xs-lint posts.xs --json`
3. Found error about missing colon
4. Used Edit tool to fix the error
5. Re-ran: `xs-lint posts.xs --json`
6. Confirmed fix successful
7. Reported to user

## Example 3: Editing an Existing File

**User Request:**
> "Add email validation to the user creation endpoint"

**Claude's Response:**

```
I'll update the users endpoint to add email validation.
```

*Edits users.xs*

```
Running automatic validation on users.xs...
âœ… Validation passed - No errors found!

Updated users.xs:
- Added email format validation
- Added required constraint on email field
```

**Behind the scenes:**
1. Used Edit tool to modify users.xs
2. Automatically ran: `xs-lint users.xs --json`
3. Validated changes
4. Reported success

## Example 4: After Running Build

**User Request:**
> "Build the project"

**Claude's Response:**

```
Running npm run build...
```

*Runs build command*

```
Build completed successfully!

Running XanoScript validation on all .xs files...
Checked 15 files:
âœ… All XanoScript files passed validation - no errors!
```

**Behind the scenes:**
1. Ran: `npm run build`
2. Automatically ran: `xs-lint --json`
3. Checked all .xs files
4. Reported summary

## Example 5: Multiple Errors Fixed Automatically

**User Request:**
> "Create an endpoint for user login with email and password"

**Claude's Response:**

```
I'll create a login endpoint.
```

*Creates login.xs*

```
Running automatic validation on login.xs...
âš ï¸ Found 3 errors - fixing automatically...

Errors detected:
1. Line 1: Missing HTTP verb (expected POST)
2. Line 6: Missing colon after 'email'
3. Line 15: Invalid function call syntax

Applying fixes...
âœ… Fixed: Added POST verb to query
âœ… Fixed: Added colon after email field
âœ… Fixed: Corrected function call syntax

Re-validating...
âœ… All errors fixed! Validation passed.

Created login.xs with:
- POST /auth/login - Authenticates user with email and password
```

## Example 6: Feature Completion Check

**User Request:**
> "That looks perfect, thanks!"

**Claude's Response:**

```
Great! Let me validate all the XanoScript files we modified...

Checking modified files:
- users.xs
- posts.xs
- login.xs

Running validation...
âœ… All modified XanoScript files validated successfully!

Summary:
- 3 files checked
- 0 errors
- 0 warnings

Your XanoScript code is ready to use!
```

**Behind the scenes:**
1. Detected conversation completion
2. Automatically ran: `xs-lint users.xs posts.xs login.xs --json`
3. Validated all modified files
4. Provided summary

## Example 7: Complex Workflow with Build and Validation

**User Request:**
> "I'm done with my changes, can you run the build and make sure everything works?"

**Claude's Response:**

```
I'll run the build and validate your XanoScript files.

Step 1: Running build...
npm run build
âœ… Build completed successfully

Step 2: Validating XanoScript files...
Checking all .xs files in project...

Results:
ðŸ“Š Checked 18 files
âœ… 17 files passed validation
âŒ 1 file with errors:

src/api/comments.xs:
  Line 22: Unexpected token - missing closing brace

Would you like me to fix this error?
```

**User:**
> "Yes please"

**Claude:**

```
Fixing error in comments.xs...
âœ… Fixed: Added missing closing brace

Re-validating...
âœ… Validation passed!

Final status:
âœ… Build: Successful
âœ… XanoScript validation: All files passed
ðŸŽ‰ Your code is ready!
```

## Example 8: Pre-Commit Validation

**User Request:**
> "I'm ready to commit my changes"

**Claude's Response:**

```
Before committing, let me validate all modified XanoScript files...

Detected changed files:
- src/api/users.xs (modified)
- src/api/posts.xs (new)
- src/functions/auth.xs (modified)

Running validation...
âœ… All XanoScript files passed validation!

Summary:
- 3 files changed
- 0 errors found
- 0 warnings

Your XanoScript code is ready to commit safely!

Would you like me to help with the git commit?
```

## Best Practices for Users

To get the most out of automatic validation:

1. **Trust the automation** - Claude will validate after every change
2. **Review the fixes** - Claude will show you what was fixed
3. **Ask questions** - If a fix doesn't make sense, ask why
4. **Use completion signals** - Phrases like "looks good!" trigger final validation
5. **Request build + validation** - Ask Claude to "build and validate" as a combined step

## Configuration

The skill automatically uses the global `xs-lint` command. If you need to use a custom path:

Create a `.xanoscript-config.json` in your project root:

```json
{
  "lintCommand": "node /custom/path/to/bin/xs-lint.js"
}
```

(Note: This feature would need to be implemented)

## Troubleshooting

**Q: Validation seems slow**
A: The LSP server startup takes 1-2 seconds. Subsequent validations are faster.

**Q: Can I disable automatic validation?**
A: Yes, just remove the skill folder. Use the slash command (`/xs-lint`) for manual validation instead.

**Q: What if I want to commit with errors?**
A: Claude will warn you but won't block you. You can proceed if you acknowledge the errors.

**Q: Can validation be batched?**
A: Yes! Claude batches validations when possible (e.g., after multiple edits in one operation).
